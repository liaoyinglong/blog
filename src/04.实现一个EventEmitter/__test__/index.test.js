"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = require("../index");
describe("测试 EventEmitter 类", function () {
    var event;
    var mockFn;
    var EventMap;
    (function (EventMap) {
        EventMap[EventMap["one"] = 0] = "one";
        EventMap[EventMap["two"] = 1] = "two";
        EventMap[EventMap["three"] = 2] = "three";
    })(EventMap || (EventMap = {}));
    beforeEach(function () {
        event = new index_1.MyEventEmitter();
        mockFn = jest.fn();
    });
    it("测试 on 和 emit 方法", function () {
        event.on(EventMap.one, mockFn);
        event.on(EventMap.one, mockFn);
        event.emit(EventMap.one);
        expect(mockFn).toBeCalled();
        expect(mockFn).toBeCalledTimes(2);
        expect(mockFn).toBeCalledWith();
    });
    it("测试 off ", function (done) {
        event.on(EventMap.one, mockFn);
        event.on(EventMap.one, mockFn);
        event.emit(EventMap.one);
        event.off(EventMap.one);
        setTimeout(function () {
            event.emit(EventMap.one);
            expect(mockFn).toBeCalled();
            expect(mockFn).toBeCalledTimes(2);
            done();
        }, 1000);
    });
    it("测试 once", function () {
        event.once(EventMap.one, mockFn);
        event.once(EventMap.two, mockFn);
        event.once(EventMap.three, mockFn);
        event.emit(EventMap.one);
        event.emit(EventMap.two);
        event.emit(EventMap.three);
        event.emit(EventMap.one);
        event.emit(EventMap.two);
        event.emit(EventMap.three);
        expect(mockFn).toBeCalled();
        expect(mockFn).toBeCalledTimes(3);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImluZGV4LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrQ0FBMEM7QUFFMUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFO0lBQzVCLElBQUksS0FBcUIsQ0FBQztJQUMxQixJQUFJLE1BQWlCLENBQUM7SUFDdEIsSUFBSyxRQUlKO0lBSkQsV0FBSyxRQUFRO1FBQ1gscUNBQUcsQ0FBQTtRQUNILHFDQUFHLENBQUE7UUFDSCx5Q0FBSyxDQUFBO0lBQ1AsQ0FBQyxFQUpJLFFBQVEsS0FBUixRQUFRLFFBSVo7SUFFRCxVQUFVLENBQUM7UUFDVCxLQUFLLEdBQUcsSUFBSSxzQkFBYyxFQUFFLENBQUM7UUFDN0IsTUFBTSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUNyQixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxpQkFBaUIsRUFBRTtRQUNwQixLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0IsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRS9CLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXpCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUNsQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBQSxJQUFJO1FBQ2hCLEtBQUssQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMvQixLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFL0IsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEIsVUFBVSxDQUFDO1lBQ1QsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFekIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQzVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFbEMsSUFBSSxFQUFFLENBQUM7UUFDVCxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxTQUFTLEVBQUU7UUFDWixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDakMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUVuQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUUzQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUUzQixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIn0=