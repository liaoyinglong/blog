"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class MyEventEmitter {
    constructor() {
        this.eventMap = new Map();
    }
    on(eventName, fn) {
        const eventArr = this.eventMap.get(eventName);
        if (eventArr === void 0) {
            this.eventMap.set(eventName, [fn]);
        }
        else {
            eventArr.push(fn);
        }
    }
    once(eventName, fn) {
        const wrapperFn = () => {
            fn();
            this.off(eventName, wrapperFn);
        };
        this.on(eventName, wrapperFn);
    }
    emit(eventName, ...args) {
        const eventArr = this.eventMap.get(eventName);
        if (eventArr !== void 0) {
            eventArr.forEach(fn => {
                fn.apply(void 0, args);
            });
        }
    }
    off(eventName, fn) {
        if (fn === void 0) {
            this.eventMap.delete(eventName);
            return;
        }
        const eventArr = this.eventMap.get(eventName);
        if (eventArr !== void 0) {
            this.eventMap.set(eventName, eventArr.filter(item => item !== fn));
        }
    }
}
exports.MyEventEmitter = MyEventEmitter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLE1BQWEsY0FBYztJQUEzQjtRQUNVLGFBQVEsR0FBRyxJQUFJLEdBQUcsRUFBd0IsQ0FBQztJQXNDckQsQ0FBQztJQXBDQyxFQUFFLENBQWUsU0FBeUIsRUFBRSxFQUFLO1FBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLElBQUksUUFBUSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDcEM7YUFBTTtZQUNMLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDbkI7SUFDSCxDQUFDO0lBRUQsSUFBSSxDQUFlLFNBQXlCLEVBQUUsRUFBSztRQUNqRCxNQUFNLFNBQVMsR0FBRyxHQUFHLEVBQUU7WUFDckIsRUFBRSxFQUFFLENBQUM7WUFDTCxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQUM7UUFDRixJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxDQUFDLFNBQXlCLEVBQUUsR0FBRyxJQUFTO1FBQzFDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLElBQUksUUFBUSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ3ZCLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7Z0JBQ3BCLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDekIsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFFRCxHQUFHLENBQWUsU0FBeUIsRUFBRSxFQUFNO1FBQ2pELElBQUksRUFBRSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2hDLE9BQU87U0FDUjtRQUNELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLElBQUksUUFBUSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDcEU7SUFDSCxDQUFDO0NBQ0Y7QUF2Q0Qsd0NBdUNDIn0=